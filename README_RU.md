# Основы анализа данных с использованием Python 3

Репозиторий содержит основные задачи элементарного анализа данных в Python версии 3.5 и выше.

## Projects

Проекты данного репозитория охватывают:
- встроенные итерируемые типы данных: список (list), кортеж (tuple), словарь (dict), множество (set), строка (str)
- модуль datetime для работы с типом дата/время
- чтение / запись текстовых данных и XML-данных
- массивы numpy и массивы array
- модуль pandas для более оптимального анализа данных
- модуль matplotlib для построения графиков


## [Анализ текста](https://github.com/LSIND/intro-to-python3-analysis/tree/master/TextAnalysis)
> *Использование встроенных возможностей Python для обработки текста*  
> *Использование строкового типа str*

Код:
  - читает весь текст из файла .txt (включая юникод)
  - удаляет все знаки препинания из текста
  - разбивает текст на независимые слова. В случае сложного слова, содержащего дефис, его следует разделить на два разных слова (например, *черно-белый = черно белый*).
  - печатает слово (слова) с максимальной длиной
  - записывает очищенный текст в новый файл .txt (по одному слову на строку).

Папка содержит файл [CrimeAndPunishment.txt](https://github.com/LSIND/intro-to-python3-analysis/blob/master/TextAnalysis/CrimeAndPunishment.txt): Ф.М. Достоевский, «Преступление и наказание», глава 6 с текстом на английском и русском языках.

## [Анализ одномерного списка](https://github.com/LSIND/intro-to-python3-analysis/tree/master/TemperaturesAnalysis)
> *Использование встроенных возможностей Python для анализа большого одномерного списка*
> *Использование list, set, dict*  

Код:
  - читает весь текст из .txt файла, содержащего одномерный список (месячные значения температур)
  - печатает максимальные, минимальные и средние значения
  - печатает общее количество значений
  - печатает количество уникальных значений
  - печатает количество вхождений для каждого значения в виде: *температура: кол-во вхождений*, отсортированные по количеству вхождений в порядке возрастания
  - запрашивает у пользователя интервал значений температур *[a; b]* и печатает температуры и их количество вхождений, отсортированные по значению температуры от *a* до *b* в порядке возрастания

Папка содержит файл [1tempdata.txt](https://github.com/LSIND/intro-to-python3-analysis/blob/master/TemperaturesAnalysis/1tempdata.txt) с набором месячных значений температур в аэропорту Хитроу с 1948 по 2016 гг.

## [Анализ многомерного списка](https://github.com/LSIND/intro-to-python3-analysis/tree/master/TrainDepAnalysis)
> *Использование list и генераторов*  
> *Использование модуля datetime*  
> *Использование класса Counter из модуля collections*  

Код:
- читает файл .txt с данными о плановых и фактических отправлениях поездов в list  

| Train # | Sch Dp                    | Act Dp |
|---------|---------------------------|--------|
| 505     | 09/01/2019 7:11   PM (Su) | 7:39PM |
| 508     | 09/01/2019   5:41 PM (Su) | 5:47PM |
| 505     | 08/10/2019 7:11   PM (Sa) |        |
| ...     | ...                       | ...    |

- с помощью модуля *datetime* преобразует Sch Dp и Act Dp в формат дата/время  
    `import datetime`

- подсчитывает количество не отправленных поездов (столбец *Act Dp* пуст) и печатает количество не отправленных поездов по дням недели с использованием модуля *collections*;  
 ```python
 from collections import Counter
 ```
   
- подсчитывает общее количество отправленных поездов, поездов по расписанию, поездов вышедших с задержкой и поездов, отправленных на следующий день.

Папка содержит файл [depsalem.txt](https://github.com/LSIND/intro-to-python3-analysis/blob/master/TrainDepAnalysis/depsalem.txt) с набором [отправлений поездов](https://juckins.net/amtrak_status/archive/html/history.php) из г. Салем, США за период с 09/01/2018 по 09/01/2019.

## [Работа с XML-данными](https://github.com/LSIND/intro-to-python3-analysis/tree/master/PlotCurrencyRates)
> *Использование модуля xml для анализа XML-данных*  
> *Использование модуля matplotlib для построения данных*  

Код (модуль **readxml**):  
- читает данные с сайта [Центрального банка России](http://www.cbr.ru/development/SXML/), который содержит информацию о валюте в XML-формате:
    * [XML с названиями валют и кодами (идентификаторами)](http://www.cbr.ru/scripts/XML_val.asp?d=0). Код должен извлекать идентификатор из предоставленного имени, например Euro = R01239;
    * [XML с курсами валют](http://www.cbr.ru/scripts/XML_dynamic.asp?date_req1=05/09/2019&date_req2=30/09/2019&VAL_NM_RQ=R01239) в зависимости от идентификатора валюты и промежутка времени (двух дат). Элемент Value содержит отношение валюты к российскому рублю на определенную дату, например 1 евро = 73,0638 руб. на 05/09/2019 (дд/мм/гг);
- использует модули *urllib.request* и *xml.etree.ElementTree* для извлечения и анализа данных XML:
 ```python
 from urllib.request import urlopen 
 from xml.etree.ElementTree import parse
 ```
    
Код (**main. py**):  
- предоставляет начальные переменные: название валюты и две даты (период). Их можно изменить или запросить у пользователя.  
     ```python
     cur = "Euro"
     startdate = "05.09.2019"   
     enddate = "30.09.2019"
     ```
- строит график курсов валют: Валюта / Российский рубль, используя *matplotlib*, например:  
![currency rates](https://www.dropbox.com/s/d2b03ndlok87q9j/ploteurotorub.PNG?raw=1)

## [Подсчет количества файлов и вложенных папок](https://github.com/LSIND/intro-to-python3-analysis/tree/master/CountFilesAndFolders)
> *Использование модуля os*   

На вход поступает корневая директория.   
Скрипт рекурсивно подсчитывает количество файлов и вложенных папок.  
Вывод для `intro-to-python3-analysis-master`:
```Console
------> intro-to-python3-analysis-master :       7 folders,  2 files
--------> CountFilesAndFolders :         0 folders,  1 files
--------> EmployeesCounts :      0 folders,  2 files
--------> NPArrayVSList :        0 folders,  3 files
--------> PlotCurrencyRates :    0 folders,  2 files
--------> TemperaturesAnalysis :         0 folders,  2 files
--------> TextAnalysis :         0 folders,  3 files
--------> TrainDepAnalysis :     0 folders,  2 files
```

## [Сравнение скорости работы встроенного списка (list), array из модуля Array и массива NumPy](https://github.com/LSIND/intro-to-python3-analysis/tree/master/NPArrayVSList)
> *Использование модуля array*  
> *Использование модуля numpy*  
```python
import array
import numpy as np
```
*Все три массива содержат целочисленные данные int*  

1. Встроенный пустой список (list) Python (`l1 = []`) занимает 64 байта. Для каждого нового элемента требуется еще 8 байт - ссылка на новый объект. Каждый новый объект int занимает 28 байт. Размер списка `l1 = [5, 10, 15]` равен:  
`64 + 8 * len(l1) + 28 * len(l1) = 88 б (список) + 84 б (элементы типа int) = 172 б`

2. Пустой массив из модуля array (`a1 = array.array('X')`), где 'X' - [тип массива](https://docs.python.org/3/library/array.html), занимает 64 байта. Для каждого нового элемента требуется еще X байт - ссылка на новый объект. Размер массива с целым числом со знаком (один элемент занимает 4 байта) `a1 = array.array('i', [5, 10, 15])` равен:    
`64 + 4 * len(a1) = 88 б`

3. Пустой массив NumPy (`n1 = np.array([])`) занимает 96 байт. Для каждого нового элемента ему также нужно 8 байт для ссылки на новый объект. Размер массива numpy `n1 = np.array ([5, 10, 15])`, где элементы являются типом int64, равен:  
`96 + 8 * len(n1) = 120 б`  

Хоть массивы array потребляют меньшее памяти, массивы NumPy показывают лучшее время обработки.

Код `merge.py`:
- создает три пары идентичных встроенных списка L1 и L2, массивов A1 и A2 из модуля array, массивов NumPy N1 и N2  
- "Склеивает" два списка, два массива и два массива NumPy
```python
result1 =  [x for y in (L1,L2) for x in y]    # lists
result2 = A1 + A2                             # arrays
result3 = np.append(N1, N2)                   # numpy arrays
```

Код `zip.py`:
- создает две пары идентичных встроенных списка L1 и L2 и массивов NumPy N1 и N2  
- объединяет итерируемые объекты в группы
```python
result1 = [(x,y) for x,y in zip(L1, L2)]      # lists
result2 = np.dstack((N1, N2))                 # numpy arrays
```

Код `deco_time.py`:
- предоставляет функцию-декоратор без параметров, которая рассчитывает время выполнения любой функции и выводит ее имя и время выполнения (в секундах) на консоль

## [Анализ csv-файла с помощью pandas](https://github.com/LSIND/intro-to-python3-analysis/tree/master/EmployeesCounts)
> *Использование модуля pandas*

Код:
- считывает данные из CSV-файла, содержащего имена сотрудников и даты/время найма, используя модуль *pandas* в датафрейм
```python
import pandas as pd
```
    
| ID  | LastName | FirstName | HireDate  | HireTime |
|-----|----------|-----------|-----------|----------|
| 1   | Newell   | Pamella   | 9/9/2018  | 14:57:00 |
| 2   | Green    | Edna      | 8/28/2018 | 7:27:00  |
| ... | ...      |  ...      | ...       | ...      |

- преобразует столбец «HireDate» в формат даты *%Y-%m-%d*
- создает вектор столбца «HireDate» и применяет к нему условие - определенный период
- выводит количество вхождений в вектор (количество нанятых людей на дату)
- строит гистограмму вхождений, например:
 
![employees counts](https://www.dropbox.com/s/zplryx10b7o7iqr/plotemplcount.PNG?raw=1)
 
Папка содержит файл [empl.csv](https://github.com/LSIND/intro-to-python3-analysis/blob/master/EmployeesCounts/empl.csv) со списком имен сотрудников, дат и времени приема на работу.
